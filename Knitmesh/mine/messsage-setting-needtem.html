<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <link rel="stylesheet" type="text/css" href="../css/mui.min.css"/>
    <link rel="stylesheet" type="text/css" href="../css/own.css"/>
    <link rel="stylesheet" type="text/css" href="../css/iconfont.css"/>
    <style type="text/css">
    
    		.mui-table-view-cell,
   		.mui-table-view-cell.mui-active,
   		.mui-table-view-cell>a:not(.mui-btn).mui-active  {
   			background-color: white;
   		}
    
    		.mui-table-view {
    			margin-bottom: 20px;
    		}
    		
    		#messagetype,
    		#gongzuoquanmsg{
    			display: none;
    		}
    </style>
</head>
<body>
	<div class="mui-content">
		<ul id="allmsg" class="mui-table-view">
			<li class="mui-table-view-cell">
				接收新消息
				<div id="get-message" class="mui-switch mui-active ">
					<div class="mui-switch-handle"></div>
				</div>
			</li>
			<li class="mui-table-view-cell">
				接收通知
				<div id="get-push" class="mui-switch mui-active">
					<div class="mui-switch-handle"></div>
				</div>
			</li>
		</ul>
		<ul id="messagetype" class="mui-table-view">
			<li class="mui-table-view-cell">
				声音
				<div id="get-voice" class="mui-switch mui-active">
					<div class="mui-switch-handle"></div>
				</div>
			</li>
			<li class="mui-table-view-cell">
				震动
				<div id="get-shark" class="mui-switch mui-active">
					<div class="mui-switch-handle"></div>
				</div>
			</li>
		</ul>
		
		<ul id="gongzuoquanmsg" class="mui-table-view">
			<li class="mui-table-view-cell">
				接收工作圈消息
				<div id="get-gongzuoquanmsg" class="mui-switch mui-active">
					<div class="mui-switch-handle"></div>
				</div>
			</li>
		</ul>
	</div>
	
	<script src="../js/mui.min.js" charset="UTF-8"></script>
	<script src="../js/own.js" charset="UTF-8"></script>
	<script type="text/javascript" charset="UTF-8">
	
	
		mui.init({
			swipeBack:true
		});
		
		var getmessage;
		var getpush;
		var getvoice;
		var getshark;
		var getgongzuoquanmsg;
		
		var messagetype;
		var gongzuoquanmsg;
		mui.plusReady(function(){
			getmessage = document.getElementById('get-message');
			getpush = document.getElementById('get-push');
			getvoice = document.getElementById('get-voice');
			getshark = document.getElementById('get-shark');
			getgongzuoquanmsg = document.getElementById('get-gongzuoquanmsg');
			messagetype = document.getElementById('messagetype');
			gongzuoquanmsg = document.getElementById('gongzuoquanmsg');
			
			if (plus.storage.getItem('get-message')) {
				messagetype.style.display = 'block';
				gongzuoquanmsg.style.display = 'block';
				if (!getmessage.classList.contains('mui-active')) {
					mui('#get-message').switch().toggle();
				}
			} else{
				messagetype.style.display = 'none';
				gongzuoquanmsg.style.display = 'none';
				if (getmessage.classList.contains('mui-active')) {
					mui('#get-message').switch().toggle();
				}
			}
			
			if (plus.storage.getItem('get-push')) {
				if (!getpush.classList.contains('mui-active')) {
					mui('#get-push').switch().toggle();
				}
			}else {
				if (getpush.classList.contains('mui-active')) {
					mui('#get-push').switch().toggle();
				}
			}
			if (plus.storage.getItem('get-voice')) {
				if (!getvoice.classList.contains('mui-active')) {
					mui('#get-voice').switch().toggle();
				}
			}else {
				if (getvoice.classList.contains('mui-active')) {
					mui('#get-voice').switch().toggle();
				}
			}
			if (plus.storage.getItem('get-shark')) {
				if (!getshark.classList.contains('mui-active')) {
					mui('#get-shark').switch().toggle();
				}
			}else {
				if (getshark.classList.contains('mui-active')) {
					mui('#get-shark').switch().toggle();
				}
			}
			if (plus.storage.getItem('get-gongzuoquanmsg')) {
				if (!getgongzuoquanmsg.classList.contains('mui-active')) {
					mui('#get-gongzuoquanmsg').switch().toggle();
				}
			}else {
				if (getgongzuoquanmsg.classList.contains('mui-active')) {
					mui('#get-gongzuoquanmsg').switch().toggle();
				}
			}
			
			getmessage.addEventListener('toggle',function(event){
				if (event.detail.isActive) {
					messagetype.style.display = 'block';
					gongzuoquanmsg.style.display = 'block';
					plus.storage.setItem('get-message','true');
				} else{
					messagetype.style.display = 'none';
					gongzuoquanmsg.style.display = 'none';
					plus.storage.removeItem('get-message');
				}
			},false);
			getpush.addEventListener('toggle',function(event){
				if (event.detail.isActive) {
					plus.storage.setItem('get-push','true');
				} else{
					plus.storage.removeItem('get-push');
				}
			},false);
			getvoice.addEventListener('toggle',function(event){
				if (event.detail.isActive) {
					plus.storage.setItem('get-voice','true');
				} else{
					plus.storage.removeItem('get-voice');
				}
			},false);
			getshark.addEventListener('toggle',function(event){
				if (event.detail.isActive) {
					plus.device.vibrate( 300 );
					plus.storage.setItem('get-shark','true');
				} else{
					plus.storage.removeItem('get-shark');
				}
			},false);
			getgongzuoquanmsg.addEventListener('toggle',function(event){
				if (event.detail.isActive) {
					plus.storage.setItem('get-gongzuoquanmsg','true');
				} else{
					plus.storage.removeItem('get-gongzuoquanmsg');
				}
			},false);
		});
	</script>
</body>
</html>